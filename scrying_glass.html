<!DOCTYPE html>
<html>
<head>
	<title>The Scrying Glass</title>
	<link rel="favorite icon" href="http://nbartco.com/mirror.png">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
	<style>
		#stat {
			border:1px solid black;
			width:1000px;
		}
		input {
			width:50px;
			color:red;
			font-weight:bold;
		}
		textarea {
			height:145px;
			width:250px;
			font-size:15px;
			font-weight:bold;
			position:relative;
			left:10px;
			top:5px;
			background-color:lightgray;
		}
		.column {
			width:300px;
			display:inline-block;
		}
		select {
			position:relative;
			left:30px;
			background-color:lightgray
		}
		button {
			width:750px;
			height:35px;
			font-size:20px;
			position:relative;
			left:100px;
		}
		.ping {
			box-shadow:0 0 150px gold;
		}
	</style>
</head>
<body>
	<div id="stat">
		<div class="column">
			<br>
			<!-- I made the button a title banner for the sake of aesthetics.-->
			<button><strong>The Scrying Glass</strong></button>
			<br><br>
			<textarea>You choose the character's personality traits.  Then click on the banner and the Scrying Glass will choose that character's accidents of birth, at random, based on the following demographic probabilities:</textarea>
			<br><br>
			<select>
				<option>Present-Day US</option>
				<option>US in 2050</option>
				<option>Chicago</option>
				<option>World</option>
				<option>New York</option>
				<option>Los Angeles</option>
				<option>England</option>
				<option>Connecticut</option>
			</select>
			<h3>Sex/Gender</h3>
			<input id="man" value="50"><span>% Male</span>
			<br>
			<input id="woman" value="50"><span>% Female</span>
			<h3>Race</h3>
			<input id="white" value="72"><span>% White</span>
			<br>
			<input id="black" value="13"><span>% Black</span>
			<br>
			<input id="asian" value="5"><span>% Asian</span>
			<br>
			<input id="native" value="1"><span>% Native American</span>
			<br>
			<input id="multi" value="3"><span>% Multiracial</span>
			<br>
			<input id="arab" value="5"><span>% Middle Eastern</span>
			<br>
			<input id="islander" value="1"><span>% Pacific Islander</span>
		</div>
		<div class="column">
			<h3>Culture</h3>
			<input id="hispanic" value="16"><span>% Hispanic</span>
			<h3>Religion</h3>
			<input id="christian" value="73"><span>% Christian</span>
			<br>
			<input id="atheist" value="20"><span>% No Religion</span>
			<br>
			<input id="jewish" value="2"><span>% Jewish</span>
			<br>
			<input id="muslim" value="1"><span>% Muslim</span>
			<br>
			<input id="buddhist" value="1"><span>% Buddhist</span>
			<br>
			<input id="hindu" value="1"><span>% Hindu</span>
			<br>
			<input id="unitarian" value="1"><span>% Unitarian</span>
			<br>
			<input id="other" value="1"><span>% Other</span>
			<h3>Socio-Economic Status</h3>
			<input id="rich" value="1"><span>% Rich</span>
			<br>
			<input id="upperMiddle" value="14"><span>% Upper Middle Class</span>
			<br>
			<input id="lowerMiddle" value="30"><span>% Lower Middle Class</span>
			<br>
			<input id="working" value="30"><span>% Working Class</span>
			<br>
			<input id="workingPoor" value="13"><span>% Working Poor</span>
			<br>
			<input id="impoverished" value="12"><span>% Impoverished</span>
			<br>
		</div>
		<div class="column">
			<h3>Sexuality</h3>
			<input id="straight" value="90"><span>% Straight</span>
			<br>
			<input id="gay" value="10"><span>% Gay</span>
			<br>
			<h3>Gender Identity</h3>
			<input id="trans" value="1"><span>% Transgendered</span>
			<br>
			<input id="cis" value="99"><span>% Cisgendered</span>
			<br>
			<h3>Disability</h3>
			<input id="visual" value="2"><span>% Visual Impairment</span>
			<br>
			<input id="hearing" value="3"><span>% Hearing Impairment</span>
			<br>
			<input id="ambulatory" value="7"><span>% Ambulatory Disability</span>
			<br>
			<input id="cognitive" value="5"><span>% Cognitive Disability</span>
			<br>
			<input id="care" value="3"><span>% Self-Care Disability</span>
			<br>
			<input id="independence" value="5"><span>% Independent Living Disability</span>
			<br>
			<input id="autism" value="1"><span>% Autism</span>
			<br>
			<input id="depression" value="2"><span>% Clinical Depression</span>
			<br>
			<input id="bipolar" value="2"><span>% Bipolar</span>
			<br>
			<input id="schizo" value="1"><span>% Schizophrenia</span>
			<br>
			<input id="eating" value="1"><span>% Eating Disorder</span>
			<br>
		</div>
	</div>
	<h6>Sources: 2010 Census, Cornell University's disabilitystatistics.org, Global Issues, Info Please, Pew Research Center, Reuters, Science Chat Forum, Sperling's, University of Connecticut Rainbow Center, Wikipedia.</h6>
	<h6>All figures rounded to a whole number.</h6>
	<h6>Some values are a rough estimate based on best available data.</h6>
</body>
<script>
$(document).ready(function() {
	//function to choose a number between 1 and 100 to be used with percentage probability.
	function prob() {
		return Math.ceil(Math.random()*100)
	}
	//logic to let users change location or demographics within that location.
	function changeSexes(num1, num2) {
		$("#man").val(num1);
		$("#woman").val(num2);
	}
	function changeRaces(num1, num2, num3, num4, num5, num6, num7) {
		$("#white").val(num1);
		$("#black").val(num2);
		$("#asian").val(num3);
		$("#native").val(num4);
		$("#multi").val(num5);
		$("#arab").val(num6);
		$("#islander").val(num7);
	}
	function changeCulture(n) {
		$("#hispanic").val(n);
	}
	function changeReligions(num1, num2, num3, num4, num5, num6, num7, num8) {
		$("#christian").val(num1);
		$("#atheist").val(num2);
		$("#jewish").val(num3);
		$("#muslim").val(num4);
		$("#buddhist").val(num5);
		$("#hindu").val(num6);
		$("#unitarian").val(num7);
		$("#other").val(num8);
	}
	function changeSES(num1, num2, num3, num4, num5, num6) {
		$("#rich").val(num1);
		$("#upperMiddle").val(num2);
		$("#lowerMiddle").val(num3);
		$("#working").val(num4);
		$("#workingPoor").val(num5);
		$("#impoverished").val(num6);
	}
	function changeSexuality(num1, num2) {
		$("#straight").val(num1);
		$("#gay").val(num2);
	}
	function changeGenderId(num1, num2) {
		$("#trans").val(num1);
		$("#cis").val(num2);
	}
	function changeDisabilities(num1, num2, num3, num4, num5, num6, num7, num8, num9, num10, num11) {
		$("#visual").val(num1);
		$("#hearing").val(num2);
		$("#ambulatory").val(num3);
		$("#cognitive").val(num4);
		$("#care").val(num5);
		$("#independence").val(num6);
		$("#autism").val(num7);
		$("#depression").val(num8);
		$("#bipolar").val(num9);
		$("#schizo").val(num10);
		$("#eating").val(num11);
	}
	$("select").change(function() {
		//have them flash off and on so user knows they changed.
		$("input").css("color", "white").animate({color:"red"}, 500);
		var mod=$("select").val();
		if (mod==="Present-Day US") {
			changeSexes(50, 50);
			changeRaces(72, 13, 5, 1, 3, 5, 1);
			changeCulture(16);
			changeReligions(73, 20, 2, 1, 1, 1, 1, 1);
			changeSES(1, 14, 30, 30, 13, 12);
			changeSexuality(90, 10);
			changeGenderId(1, 99);
			changeDisabilities(2, 3, 7, 5, 3, 5, 1, 2, 2, 1, 1);
		} else if (mod==="US in 2050") {
			changeSexes(50, 50);
			changeRaces(47, 13, 8, 1, 25, 5, 1);
			changeCulture(29);
			changeReligions(73, 20, 2, 1, 1, 1, 1, 1);
			changeSES(1, 14, 30, 30, 13, 12);
			changeSexuality(90, 10);
			changeGenderId(1, 99);
			changeDisabilities(2, 3, 7, 5, 3, 5, 1, 2, 2, 1, 1);
		} else if (mod==="Chicago") {
			changeSexes(50, 50);
			changeRaces(45, 33, 6, 1, 3, 12, 0);
			changeCulture(29);
			changeReligions(54, 38, 1, 4, 1, 1, 0, 1);
			changeSES(1, 26, 34, 11, 11, 17);
			changeSexuality(90, 10);
			changeGenderId(1, 99);
			changeDisabilities(2, 3, 7, 5, 3, 5, 1, 2, 2, 1, 1);
		} else if (mod==="World") {
			changeSexes(50, 50);
			changeRaces(16, 15, 55, 1, 4, 8, 1);
			changeCulture(8);
			changeReligions(33, 12, 1, 23, 7, 14, 0, 10);
			changeSES(2, 14, 14, 0, 50, 20);
			changeSexuality(90, 10);
			changeGenderId(1, 99);
			changeDisabilities(2, 3, 7, 5, 3, 5, 1, 2, 2, 1, 1);
		} else if (mod==="New York") {
			changeSexes(50, 50);
			changeRaces(44, 26, 13, 1, 2, 13, 1);
			changeCulture(29);
			changeReligions(54, 36, 4, 2, 1, 1, 1, 1);
			changeSES(2, 14, 14, 0, 50, 20);
			changeSexuality(90, 10);
			changeGenderId(1, 99);
			changeDisabilities(2, 3, 7, 5, 3, 5, 1, 2, 2, 1, 1);
		} else if (mod==="Los Angeles") {
			changeSexes(50, 50);
			changeRaces(50, 10, 11, 1, 5, 22, 1)
			changeCulture(49);
			changeReligions(43, 51, 1, 1, 1, 1, 1, 1);
			changeSES(4, 19, 30, 13, 14, 20);
			changeSexuality(90, 10);
			changeGenderId(1, 99);
			changeDisabilities(2, 3, 7, 5, 3, 5, 1, 2, 2, 1, 1);
		} else if (mod==="England") {
			changeSexes(50, 50);
			changeRaces(88, 3, 7, 0, 1, 1, 0);
			changeCulture(0);
			changeReligions(59, 31, 1, 5, 1, 2, 0, 1);
			changeSES(1, 4, 33, 28, 28, 6);
			changeSexuality(90, 10);
			changeGenderId(1, 99);
			changeDisabilities(2, 3, 7, 5, 3, 5, 1, 2, 2, 1, 1);
		} else if (mod==="Connecticut") {
			changeSexes(50, 50);
			changeRaces(77, 10, 4, 1, 3, 5, 0);
			changeCulture(13);
			changeReligions(69, 23, 3, 1, 1, 1, 1, 1);
			changeSES(1, 14, 30, 30, 13, 12);
			changeSexuality(90, 10);
			changeGenderId(1, 99);
			changeDisabilities(2, 3, 7, 5, 3, 5, 1, 2, 2, 1, 1);
		}
	});
	$("button").click(function() {	
		//must add so that acceptable values are between outer range of one and inner range of the other.
		var manCount = parseInt($("#man").val());
		var womanCount = parseInt($("#woman").val()) + manCount;
	
		var whiteCount = parseInt($("#white").val());
		var blackCount = parseInt($("#black").val()) + whiteCount;
		var asianCount = parseInt($("#asian").val()) + blackCount;
		var nativeCount = parseInt($("#native").val()) + asianCount;
		var multiCount = parseInt($("#multi").val()) + nativeCount;
		var arabCount = parseInt($("#arab").val()) + multiCount;
		var islanderCount = parseInt($("#islander").val()) + arabCount;
		
		var hispanicCount = parseInt($("#hispanic").val());
		
		var christianCount = parseInt($("#christian").val());
		var atheistCount = parseInt($("#atheist").val()) + christianCount;
		var jewishCount = parseInt($("#jewish").val()) + atheistCount;
		var muslimCount = parseInt($("#muslim").val()) + jewishCount;
		var buddhistCount = parseInt($("#buddhist").val()) + muslimCount;
		var hinduCount = parseInt($("#hindu").val()) + buddhistCount;
		var unitarianCount = parseInt($("#unitarian").val()) + hinduCount;
		var otherCount = parseInt($("#other").val()) + unitarianCount;
		
		var richCount = parseInt($("#rich").val());
		var upperMiddleCount = parseInt($("#upperMiddle").val()) + richCount;
		var lowerMiddleCount = parseInt($("#lowerMiddle").val()) + upperMiddleCount;
		var workingCount = parseInt($("#working").val()) + lowerMiddleCount;
		var workingPoorCount = parseInt($("#workingPoor").val()) + workingCount;
		var impoverishedCount = parseInt($("#impoverished").val()) + workingPoorCount;
		
		var straightCount = parseInt($("#straight").val());
		var gayCount = parseInt($("#gay").val()) + straightCount;
		
		var transCount = parseInt($("#trans").val());
		var cisCount = parseInt($("#cis").val()) + transCount;
		
		var visualCount = parseInt($("#visual").val());
		var hearingCount = parseInt($("#hearing").val()) + visualCount;
		var ambulatoryCount = parseInt($("#ambulatory").val()) + hearingCount;
		var cognitiveCount = parseInt($("#cognitive").val()) + ambulatoryCount;
		var careCount = parseInt($("#care").val()) + cognitiveCount;
		var independenceCount = parseInt($("#independence").val()) + careCount;
		var autismCount = parseInt($("#autism").val()) + independenceCount;
		var depressionCount = parseInt($("#depression").val()) + autismCount;
		var bipolarCount = parseInt($("#bipolar").val()) + depressionCount;
		var schizoCount = parseInt($("#schizo").val()) + bipolarCount;
		var eatingCount = parseInt($("#eating").val()) + schizoCount;
		
		if (womanCount!==100) {
			alert("Your sex/gender statistics do not add to 100%");
		} else if (islanderCount!==100) {
			alert("Your racial statistics do not add to 100%");
		} else if (hispanicCount>100) {
			alert("It's impossible for the Hispanic population to be more than 100% of the overall population.");
		} else if (otherCount!==100) {
			alert("Your religious statistics do not add to 100%");
		} else if (impoverishedCount!==100) {
			alert("Your socio-economic statistics do not add to 100%");
		} else if (gayCount!==100) {
			alert("Your sexuality statistics do not add to 100%");
		} else if (cisCount!==100) {
			alert("Your gender identity statistics do not add to 100%");
		} else if (eatingCount>100) {
			alert("Your disability statistics should not add to more than 100%");
		} else {
			var color=prob();
			var race;
			var religion=prob();
			var faith;
			var gender=prob();
			var sex;
			var sexuality=prob();
			var scale;
			var trans=prob();
			var transgender;
			var latino=prob();
			var hispanic;
			var ability=prob();
			var disability;
			var socioeconomic=prob();
			var status;

			if (socioeconomic <= richCount) {
				status="a rich";
			} else if (socioeconomic > richCount && socioeconomic <= upperMiddleCount) {
				status="an upper middle class";
			} else if (socioeconomic > upperMiddleCount && socioeconomic <= lowerMiddleCount) {
				status="a lower middle class";
			} else if (socioeconomic > lowerMiddleCount && socioeconomic <= workingCount) {
				status="a working class";
			} else if (socioeconomic > workingCount && socioeconomic <= workingPoorCount) {
				status="a working poor";
			} else {
				status="a poverty-stricken";
			}

			if (latino <= hispanicCount) {
				hispanic="/Hispanic";
			} else {
				hispanic="";
			}

			if (color <= whiteCount) {
				race="white";
			} else if (color > whiteCount && color <= blackCount) {
				race="black";
			} else if (color > blackCount && color <= asianCount) {
				race="Asian";
			} else if (color > asianCount && color <= nativeCount) {
				race="Native American";
			} else if (color > nativeCount && color <= multiCount) {
				race="multiracial";
			} else if (color > multiCount && color <= arabCount) {
				race="Arabic";
			} else {
				race="Pacific Islander";
			}
	
			if (religion <= christianCount) {
				faith="Christian";
			} else if (religion > christianCount && religion <= atheistCount) {
				faith="irreligious";
			} else if (religion > atheistCount && religion <= jewishCount) {
				faith="Jewish";
			} else if (religion > jewishCount && religion <= muslimCount) {
				faith="Muslim";
			} else if (religion > muslimCount && religion <= buddhistCount) {
				faith="Buddhist";
			} else if (religion > buddhistCount && religion <= hinduCount) {
				faith="Hindu";
			} else if (religion > hinduCount && religion <= unitarianCount) {
				faith="Unitarian";
			} else {
				var creeds=["Baha'i", "Sikh", "Jain", "Shinto", "Confucian", "Daoist", "Druid", "Wiccan", "Zoroastrian"];
				faith=creeds[Math.round(Math.random()*8)];
			}

			if (gender <= manCount) {
				sex="man";
			} else {
				sex="woman";
			}

			if (sexuality <= straightCount) {
				scale="straight";
			} else {
				scale="gay";
			}

			if (trans <= transCount) {
				transgender="transgendered ";
			} else {
				transgender="";
			}

			if (ability <= visualCount) {
				disability=" with a visual impairment";
			} else if (ability > visualCount && ability <= hearingCount) {
				disability=" with a hearing disability";
			} else if (ability > hearingCount && ability <= ambulatoryCount) {
				disability=" with an ambulatory disability";
			} else if (ability > ambulatoryCount && ability <= cognitiveCount) {
				disability=" with a cognitive disability";
			} else if (ability > cognitiveCount && ability <= careCount) {
				disability=" with a self-care disability";
			} else if (ability > careCount && ability <= independenceCount) {
				disability=" with an independent living disability";
			} else if (ability > independenceCount && ability <= autismCount) {
				disability=" with autism";
			} else if (ability > autismCount && ability <= depressionCount) {
				disability=" with severe depression";
			} else if (ability > depressionCount && ability <= bipolarCount) {
				disability=" with bipolar disorder";
			} else if (ability > bipolarCount && ability <= schizoCount) {
				disability=" with schizophrenia";
			} else if (ability > schizoCount && ability <= eatingCount) {
				disability=" with an eating disorder";
			} else {
				disability="";
			}
			
			//have text area flash to draw user's eye there.
			var x=$("textarea").addClass("ping");
			setTimeout(function() {x.removeClass("ping")}, 200);
			$("textarea").val("Your character is " + status + " " + race + hispanic + " " + faith + " " + scale + " " + transgender + sex + disability + ".");
		}
	});
});
</script>
</html>
